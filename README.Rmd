---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# guttmacherggplottheme

<!-- badges: start -->
<!-- badges: end -->

The goal of guttmacherggplottheme is to provide ggplot themes and color palettes that align with Guttmacher's branding. This package is still in beta; please contact amurulidhar@guttmacher.org or imaddowzimet@guttmacher.org with any bug reports or suggestions (or feel free to file an issue on this Github page directly). 

## Installation

You can install the guttmacherggplottheme from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("GuttInst/guttmacherggplottheme")
```

## How to use the package

Here's a simple example that shows you how to apply the guttmacherggplottheme palettes and theme to a simple plot.  

We use the built-in R dataset called "iris" for these examples, which we load below; we also create a few sequential categorical variables (for Petal Length and Sepal Length) to use in our examples. 

```{r setup, message=FALSE, results=FALSE, warning=FALSE}
# Load libraries
library(guttmacherggplottheme)
library(ggplot2)
library(ggthemes) # IMZ2AS: Do we need ggthemes?
library(extrafont)
library(dplyr)

# Load iris dataset
data(iris)

# Create bins for Petal.Length variable
iris <- iris %>%
  mutate(Petal.Length.Category = cut(Petal.Length,
                                      breaks = c(0, 2, 3, 4, 5, 6, max(iris$Petal.Length)),
                                      labels = c("1–1.9", "2–2.9", "3–3.9", "4–4.9", "5–5.9", "6+"),
                                      right = TRUE))

# Create bins for Sepal.Length variable
iris$Sepal.Length.Category <- cut(iris$Sepal.Length, 
                                   breaks = c(-Inf, 5, 6, 7, Inf), 
                                   labels = c("Short", "Medium", "Long", "Very Long"))
```

Guttmacher figures typically use *National Condensed* or *Gotham Narrow*; because these may not be available on your local machine, you can use *Arial* as an alternative. 
In order to use any particular font, you need to first import and load it using the `extrafont` package. 

```{r loadfonts, message=FALSE, results=FALSE, warning=FALSE}
# Import and load fonts
font_import(pattern="arial.ttf", prompt=FALSE)
loadfonts() # IMZ2AS: I think this needs to specify device = "win" for png?
```

Next, you can use one of the guttmacherggplottheme functions to define a color palette for your plot; for categorical palettes, you will need to specify the number of categories that need colors assigned. 
```{r getpalette}
# Define palette
categorical_palette <- guttmacherggplottheme::get_categorical_palette(4)        
```

Now that the libraries, fonts and palette are ready, you can create a plot!
Here's a simple categorical plot that uses the Guttmacher theme and palette.

```{r example1, fig.width=6.75, fig.height=7, dpi=700}
################################################################################
# Example categorical plot 
################################################################################
# IMZ2AS: Any way to not have overlap here?
ggplot(iris, aes(x = Species, fill = Sepal.Length.Category)) +
  geom_bar(position = "stack") +
  scale_fill_manual(values = categorical_palette) + # Use palette here
  guttmacherggplottheme::guttmacher_theme() + 
  labs(title = "Sepal Length Categories by Species",
       x = "Species",
       y = "Count",
       fill = "Sepal Length Category") 

```

# A few more examples

## Continuous palettes: Sequential 

```{r example_pt2, fig.width=6.75, fig.height=7, dpi=700}
################################################################################
# Continuous Plot Examples
################################################################################

# Example plot using sequential continuous palette
sequential_palette <- guttmacherggplottheme::get_sequential_palette("blue")     # Define palette
ggplot(iris, aes(x = Sepal.Length, y = Sepal.Width, color = Petal.Length)) +
  geom_point() + scale_color_gradientn(colors = sequential_palette,             # Use palette here
                                       breaks=c(min(iris$Petal.Length)+0.25,
                                       median(iris$Petal.Length), 
                                       max(iris$Petal.Length)-0.2), 
                                       labels = c(1,round(median(iris$Petal.Length)),
                                                  round(max(iris$Petal.Length)))) + 
  guttmacherggplottheme::guttmacher_theme(legend_border = FALSE) + 
  guides(color = guide_colorbar(ticks.colour = NA)) +
  labs(title = "Figure 2. Sepal Length vs. Sepal Width by Petal Length", 
       x = "Sepal Length", y = "Sepal Width", color="Petal Length")
```

## Continuous palettes: Divergent

```{r example_pt3, fig.width=6.75, fig.height=7, dpi=700}

# Example plot using divergent continuous palette
divergent_palette <- guttmacherggplottheme::get_divergent_palette()             # Define palette   
ggplot(iris, aes(x = Sepal.Length, y = Sepal.Width, color = Petal.Length)) +
  geom_point() + scale_color_gradientn(colors = divergent_palette,              # Use palette here
                                       breaks=c(min(iris$Petal.Length)+0.25,
                                       median(iris$Petal.Length), 
                                       max(iris$Petal.Length)-0.2), 
                                       labels = c(1,round(median(iris$Petal.Length)),
                                                  round(max(iris$Petal.Length)))) + 
  guttmacherggplottheme::guttmacher_theme(legend_border = FALSE) + 
  guides(color = guide_colorbar(ticks.colour = NA)) +
  labs(title = "Figure 3. Sepal Length vs. Sepal Width by Petal Length", x = "Sepal Length", 
       y = "Sepal Width", color="Petal Length") 
```

## Categorical palettes: Sequential

```{r example_pt4, fig.width=6.75, fig.height=7, dpi=700}

# Example plot using sequential categorical palette
sequential_categorical_palette <- 
  guttmacherggplottheme::get_sequential_categorical_palette("orange", 6)        # Define palette
ggplot2::ggplot(iris, aes(x = Sepal.Length, y = Sepal.Width, color = Petal.Length.Category)) +
  geom_point() + scale_color_manual(values = sequential_categorical_palette) +  # Use palette here
  guttmacherggplottheme::guttmacher_theme() + 
  labs (title ="Figure 4. Sepal Length vs. Sepal Width by Petal Length", x = "Sepal Length", 
        y = "Sepal Width", color = "Petal Length" ) 

```

## Categorical palettes: Divergent

Please note that the get_divergent_categorical_palette() function can only currently be used for variables with exactly 6 levels.

```{r example_pt5, fig.width=6.75, fig.height=7, dpi=700}

# Example plot using divergent categorical palette; note that the divergent 
# categorical palette is intended for plots with 6 categorical variables
divergent_categorical_palette <- guttmacherggplottheme::get_divergent_categorical_palette()   # Define palette
ggplot2::ggplot(iris, aes(x = Sepal.Length, y = Sepal.Width, color = Petal.Length.Category)) +
  geom_point() + scale_color_manual(values = divergent_categorical_palette) +   # Use palette here
  guttmacherggplottheme::guttmacher_theme() + 
  labs (title ="Figure 5. Sepal Length vs. Sepal Width by Petal Length", x = "Sepal Length", 
        y = "Sepal Width", color = "Petal Length" ) 

```

## Feedback

Guttmacherggplot theme is a new package and we would love to hear any feedback or suggestions to help us improve! Please feel free to contact us at amurulidhar@guttmacher.org or imaddowzimet@guttmacher.org with any thoughts or concerns. 
